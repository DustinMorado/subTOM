

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>subtom_clean_motl &mdash; subTOM 1.0.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="subtom_compare_motls" href="subtom_compare_motls.html" />
    <link rel="prev" title="subtom_cat_motls" href="subtom_cat_motls.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> subTOM
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial.html">Tutorial</a></li>
</ul>
<p class="caption"><span class="caption-text">Links to Individual Script Documentation:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="subtom_alignment.html">subtom_alignment.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="subtom_average.html">subtom_average.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="subtom_cat_motls.html">subtom_cat_motls.sh</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">subtom_clean_motl.sh</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#options">Options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#directories">Directories</a></li>
<li class="toctree-l3"><a class="reference internal" href="#variables">Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#file-options">File Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clean-options">Clean Options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="subtom_compare_motls.html">subtom_compare_motls.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="subtom_even_odd_motl.html">subtom_even_odd_motl.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="subtom_extract_noise.html">subtom_extract_noise.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="subtom_extract_subtomograms.html">subtom_extract_subtomograms.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="subtom_maskcorrected_fsc.html">subtom_maskcorrected_fsc.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="subtom_preprocess.html">subtom_preprocess.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="subtom_plot_filter.html">subtom_plot_filter.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="subtom_plot_scanned_angles.html">subtom_plot_scanned_angles.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="subtom_reconstruct.html">subtom_reconstruct.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="subtom_scale_motl.html">subtom_scale_motl.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="subtom_seed_positions.html">subtom_seed_positions.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="subtom_shape.html">subtom_shape.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="subtom_split_motl_by_row.html">subtom_split_motl_by_row.sh</a></li>
<li class="toctree-l1"><a class="reference internal" href="subtom_transform_motl.html">subtom_transform_motl.sh</a></li>
</ul>
<p class="caption"><span class="caption-text">Links to Individual Function Documentation:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../functions/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/subtom_cat_motls.html">subtom_cat_motls.m</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/subtom_clean_motl.html">subtom_clean_motl.m</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/subtom_compare_motls.html">subtom_compare_motls.m</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/subtom_even_odd_motl.html">subtom_even_odd_motl.m</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/subtom_extract_noise.html">subtom_extract_noise.m</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/subtom_extract_subtomograms.html">subtom_extract_subtomograms.m</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/subtom_maskcorrected_fsc.html">subtom_maskcorrected_fsc.m</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/subtom_parallel_sums.html">subtom_parallel_sums.m</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/subtom_plot_filter.html">subtom_plot_filter.m</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/subtom_plot_scanned_angles.html">subtom_plot_scanned_angles.m</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/subtom_scale_motl.html">subtom_scale_motl.m</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/subtom_scan_angles_exact.html">subtom_scan_angles_exact.m</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/subtom_seed_positions.html">subtom_seed_positions.m</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/subtom_shape.html">subtom_shape.m</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/subtom_split_motl_by_row.html">subtom_split_motl_by_row.m</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/subtom_transform_motl.html">subtom_transform_motl.m</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functions/subtom_weighted_average.html">subtom_weighted_average.m</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">subTOM</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>subtom_clean_motl</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/scripts/subtom_clean_motl.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="subtom-clean-motl">
<h1>subtom_clean_motl<a class="headerlink" href="#subtom-clean-motl" title="Permalink to this headline">¶</a></h1>
<p>Cleans a given MOTL file based on distance and/or CC scores.</p>
<p>This MOTL manipulation script uses one MATLAB compiled scripts below:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../functions/subtom_clean_motl.html"><span class="doc">subtom_clean_motl</span></a></p></li>
</ul>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<div class="section" id="directories">
<h3>Directories<a class="headerlink" href="#directories" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>scratch_dir</dt><dd><p>Absolute path to the folder with the input to be processed.
Other paths are relative to this one.</p>
</dd>
<dt>mcr_cache_dir</dt><dd><p>Absolute path to MCR directory for the processing.</p>
</dd>
<dt>exec_dir</dt><dd><p>Directory for executables</p>
</dd>
</dl>
</div>
<div class="section" id="variables">
<h3>Variables<a class="headerlink" href="#variables" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>clean_motl_exec</dt><dd><p>Clean MOTLs executable</p>
</dd>
</dl>
</div>
<div class="section" id="file-options">
<h3>File Options<a class="headerlink" href="#file-options" title="Permalink to this headline">¶</a></h3>
<dl>
<dt>input_motl_fn</dt><dd><p>Relative path and name of the input MOTL file to be cleaned.</p>
</dd>
<dt>output_motl_fn</dt><dd><p>Relative path and name of the output MOTL file.</p>
</dd>
<dt>output_stats_fn</dt><dd><p>Relative path and name of the optional output cleaning stats CSV file. If you
do not want to write out the differences just leave this as “”.</p>
<p>The CSV format of the output statistics file for cleaning is a single row with
the following columns:</p>
</dd>
</dl>
<table class="docutils align-default">
<colgroup>
<col style="width: 35%" />
<col style="width: 65%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>1</p></td>
<td><p>Total Initial Number of Particles</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>Number of Particles Removed  in Edge Cleaning</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>Number of Particles Removed in Cluster Cleaning</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>Number of Particles Removed in Distance Cleaning</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>Number of Particles Removed in CC Cleaning</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>Total Remaining Number of Particles</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="clean-options">
<h3>Clean Options<a class="headerlink" href="#clean-options" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>tomo_row</dt><dd><p>Which row in the motl file contains the correct tomogram number.
Usually row 5 and 7 both correspond to the correct value and can be used
interchangeably, but there are instances when 5 contains a sequential ordered
value starting from 1, while 7 contains the correct corresponding tomogram.</p>
</dd>
<dt>do_ccclean</dt><dd><p>If the following is set to 1 then the MOTL will be cleaned by CCC either by
CCC value or a fraction of the highest CCC values to keep. If it is set to 0
then CCC cleaning will be skipped.</p>
</dd>
<dt>cc_fraction</dt><dd><p>If cleaning by CC then after edge, cluster, and distance cleaning, if any are
selected, is completed. The MOTL will be sorted by CCC and then the top
fraction as specified here will be kept with the rest discarded. For example
if cc_fraction=0.7 the top 70% of the clean data will be kept and the bottom
30% of the cleaned data will be discarded. A value of 1 here means that data
is not cleaned by CCC fraction.</p>
</dd>
<dt>cc_cutoff</dt><dd><p>If cc_fraction is 1 and therefore not used then particles with a CCC below
this cutoff will be removed from the output MOTL file. Values must be within
-1 to 1, with -1 not removing any particles.</p>
</dd>
<dt>do_distance</dt><dd><p>If the following is set to 1 then the MOTL will be cleaned by distance. If it
is set to 0 distance cleaning will be skipped.</p>
</dd>
<dt>distance_cutoff</dt><dd><p>Particles that are less than this distance in pixels from another particle
will be cleaned with the particle with the highest CCC kept while the others
are removed from the output MOTL file.</p>
</dd>
<dt>do_cluster</dt><dd><p>If the following is set to 1 then the MOTL will be cleaned by a clustering
criteria that enforces kept particles to exist as clusters. This can be useful
when there is no lattice and clusters of particles makes a good indication
that a true copy of the reference exists there. If it is set to 0 cluster
cleaning will be skipped.</p>
</dd>
<dt>cluster_distance</dt><dd><p>The following determines the radius that defines what is considered a cluster
in cluster cleaning.</p>
</dd>
<dt>cluster_size</dt><dd><p>The cluster size specifies how many particles must be found within
cluster_distance for the particle to be considered part of a cluster. The
particle with the highest CCC in the cluster will be selected as the
representative particle for the cluster and the remaining clustered points
will be removed.</p>
</dd>
<dt>do_edge</dt><dd><p>If the following is set to 1 then the MOTL will be edge cleaned considering
the dimensions of the tomogram in which the particles are contained. If any
part of the particle exists outside of the tomogram it will be removed from
the MOTL. If it is set to 0 edge cleaning will be skipped.</p>
</dd>
<dt>tomogram_dir</dt><dd><p>Absolute path to the folder where the tomograms are stored. If you are not
edge cleaning leave this set to “”.</p>
</dd>
<dt>box_size</dt><dd><p>What is the box size of the particle that will be extracted from the tomogram,
which is necessary to specify to be able to edge clean.</p>
</dd>
<dt>write_stats</dt><dd><p>If the following is 1 then the details of how many particles were cleaned in
each stage will be written out, if 0 then not.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">scratch_dir</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PWD</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="nv">mcr_cache_dir</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">scratch_dir</span><span class="si">}</span><span class="s2">/mcr&quot;</span>

<span class="nv">exec_dir</span><span class="o">=</span><span class="s2">&quot;/net/dstore2/teraraid/dmorado/software/subTOM/bin&quot;</span>

<span class="nv">clean_motl_exec</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">exec_dir</span><span class="si">}</span><span class="s2">/MOTL/subtom_clean_motl&quot;</span>

<span class="nv">input_motl_fn</span><span class="o">=</span><span class="s2">&quot;combinedmotl/allmotl_2.em&quot;</span>

<span class="nv">output_motl_fn</span><span class="o">=</span><span class="s2">&quot;combinedmotl/allmotl_cc0.1_dist4_cluster2d10_2.em&quot;</span>

<span class="nv">output_stats_fn</span><span class="o">=</span><span class="s2">&quot;combinedmotl/allmotl_cc0.1_dist4_cluster2d10_stats.csv&quot;</span>

<span class="nv">tomo_row</span><span class="o">=</span><span class="m">7</span>

<span class="nv">do_ccclean</span><span class="o">=</span><span class="m">1</span>

<span class="nv">cc_fraction</span><span class="o">=</span><span class="m">1</span>

<span class="nv">cc_cutoff</span><span class="o">=</span><span class="m">0</span>.1

<span class="nv">do_distance</span><span class="o">=</span><span class="m">1</span>

<span class="nv">distance_cutoff</span><span class="o">=</span><span class="m">4</span>

<span class="nv">do_cluster</span><span class="o">=</span><span class="m">1</span>

<span class="nv">cluster_distance</span><span class="o">=</span><span class="m">10</span>

<span class="nv">cluster_size</span><span class="o">=</span><span class="m">2</span>

<span class="nv">do_edge</span><span class="o">=</span><span class="m">1</span>

<span class="nv">tomogram_dir</span><span class="o">=</span><span class="s2">&quot;/net/dstore2/teraraid/dmorado/subTOM_tutorial/data/tomos/bin8&quot;</span>

<span class="nv">box_size</span><span class="o">=</span><span class="m">36</span>

<span class="nv">write_stats</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="subtom_compare_motls.html" class="btn btn-neutral float-right" title="subtom_compare_motls" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="subtom_cat_motls.html" class="btn btn-neutral float-left" title="subtom_cat_motls" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Dustin Reed Morado

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>